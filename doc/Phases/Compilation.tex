\section{Compilation}
The fourth phase is the compilation phase. In this file, the program paths are
reconstructed into valid Java programs. These Java programs are then compiled into
Java bytecode using \command{javac} and packed into jar files using \command{jar}.
This phase runs in parallel, speeding up the compilation. The number of worker
threads can be changed by tweaking a verification argument.

The compilation phase works by reconstructing each program path back into a 
\haskellinline{CompilationUnit'}, which is then compiled and packed. This
reconstruction works by grouping the program path by its classes, then by its 
methods and constructors, then by its blocks, and finally by its statements.

The compiler does not make many modifications to the program paths: the main
modification is that constructors, and constructor calls, are changed into 
static methods and regular method invocations. This modification is necessary as
constructors cannot have names that are not equal to the class name. We need
unique constructor names as same the same constructor can be called multiple times,
but each having an unique program sub-path associated with that constructor call.

\subsection{External filtering and modification of program paths}
The \haskellinline{Arguments} value given to the verification tool contains a
record value, shown in listing \ref{listing:path_filter}. This function allows 
for the adjustment and filtering of specific abstract syntax trees that are
created from the generated program paths.
\begin{Haskell}{listing:path_filter}{Filtering record value of \haskellinline{Arguments}.}
pathMapFilter :: CompilationUnit' -> Maybe CompilationUnit'
\end{Haskell}
When this function results in \haskellinline{Nothing}, the abstract syntax tree 
will be filtered. When this function results in \haskellinline{Just p}, the 
abstract syntax tree \haskellinline{p} will be verified.

\subsection{Java and unreachable code}
The Java language specification \cite{Gosling:2014:JLS:2636997} states in section
14.21 that unreachable code is treated as a compile-time error. Generated program 
paths containing \javainline{throw} or \javainline{return} statements can contain 
unreachable code, which will fail to compile. 

This will currently result in a failure in the compilation phase. A solution would
be to define the \haskellinline{pathMapFilter} function to modify the abstract 
syntax tree such that it no longer contains unreachable code as defined by the
Java language specification.